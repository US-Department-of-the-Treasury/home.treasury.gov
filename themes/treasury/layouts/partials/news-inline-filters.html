{{/* Inline Filter Bar - Quick filters for news sections */}}
<div class="inline-filters" id="inline-filters">
  <div class="filter-row">
    {{/* Quick Date Toggles */}}
    <div class="quick-filters">
      <button type="button" class="quick-filter-btn" data-filter="today">Today</button>
      <button type="button" class="quick-filter-btn" data-filter="week">This Week</button>
      <button type="button" class="quick-filter-btn" data-filter="month">This Month</button>
      <button type="button" class="quick-filter-btn" data-filter="year">This Year</button>
    </div>

    {{/* Date Range */}}
    <div class="date-range-group">
      <label for="filter-date-from" class="visually-hidden">From date</label>
      <input type="date" id="filter-date-from" class="date-picker" placeholder="From">
      <span class="date-separator">â€“</span>
      <label for="filter-date-to" class="visually-hidden">To date</label>
      <input type="date" id="filter-date-to" class="date-picker" placeholder="To">
    </div>

    {{/* Keyword Search */}}
    <div class="keyword-search-group">
      <label for="filter-keyword" class="visually-hidden">Search by keyword</label>
      <input type="text" id="filter-keyword" class="keyword-input" placeholder="Search keywords...">
      <button type="button" class="search-btn" id="apply-filters-btn" aria-label="Apply filters">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>
    </div>

    {{/* Advanced Search Link */}}
    <a href="/news/search/" class="advanced-search-link">
      Advanced Search
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </a>
  </div>

  {{/* Active Filters Display */}}
  <div class="active-filters" id="active-filters" style="display: none;">
    <span class="active-label">Filtering:</span>
    <div class="filter-tags" id="filter-tags"></div>
    <button type="button" class="clear-all-btn" id="clear-filters-btn">Clear All</button>
  </div>
</div>

{{/* Results area - replaces the original article list when filtering */}}
<div id="filtered-results" style="display: none;">
  <div class="results-summary">
    <span class="results-count-display" id="inline-results-count">Showing 0 results</span>
    <button type="button" class="reset-btn" id="reset-to-paginated">Reset</button>
  </div>
  <div class="news-article-list" id="inline-results-list"></div>
  <div class="results-pagination" id="inline-results-pagination"></div>
</div>

<style>
/* Inline Filter Bar Styles */
.inline-filters {
  background: var(--gray-100);
  border: 1px solid var(--gray-200);
  padding: 0.875rem 1rem;
  margin-bottom: 1.25rem;
}

.filter-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* Quick Filter Buttons */
.quick-filters {
  display: flex;
  gap: 0.375rem;
}

.quick-filter-btn {
  background: #fff;
  border: 1px solid var(--gray-300);
  padding: 0.4rem 0.75rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--gray-700);
  cursor: pointer;
  transition: all 0.15s ease;
}

.quick-filter-btn:hover {
  border-color: var(--treasury-navy-light);
  color: var(--treasury-navy-light);
}

.quick-filter-btn.active {
  background: var(--treasury-navy-light);
  border-color: var(--treasury-navy-light);
  color: #fff;
}

/* Date Range */
.date-range-group {
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.date-picker {
  padding: 0.4rem 0.5rem;
  border: 1px solid var(--gray-300);
  font-size: 0.8125rem;
  width: 130px;
  background: #fff;
}

.date-picker:focus {
  outline: 2px solid var(--treasury-navy-light);
  outline-offset: 0;
  border-color: var(--treasury-navy-light);
}

.date-separator {
  color: var(--gray-400);
  font-size: 0.875rem;
}

/* Keyword Search */
.keyword-search-group {
  display: flex;
  flex: 1;
  max-width: 280px;
  min-width: 180px;
}

.keyword-input {
  flex: 1;
  padding: 0.4rem 0.625rem;
  border: 1px solid var(--gray-300);
  border-right: none;
  font-size: 0.875rem;
  background: #fff;
}

.keyword-input:focus {
  outline: 2px solid var(--treasury-navy-light);
  outline-offset: 0;
  border-color: var(--treasury-navy-light);
  z-index: 1;
}

.search-btn {
  background: var(--treasury-navy-light);
  border: 1px solid var(--treasury-navy-light);
  color: #fff;
  padding: 0.4rem 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-btn:hover {
  background: var(--treasury-navy);
  border-color: var(--treasury-navy);
}

/* Advanced Search Link */
.advanced-search-link {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--treasury-navy-light);
  text-decoration: none;
  padding: 0.4rem 0;
  margin-left: auto;
  white-space: nowrap;
}

.advanced-search-link:hover {
  text-decoration: underline;
}

.advanced-search-link svg {
  transition: transform 0.15s ease;
}

.advanced-search-link:hover svg {
  transform: translateX(2px);
}

/* Active Filters */
.active-filters {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-top: 0.75rem;
  padding-top: 0.75rem;
  border-top: 1px solid var(--gray-200);
  flex-wrap: wrap;
}

.active-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gray-600);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.filter-tags {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.filter-tag {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  background: var(--treasury-navy-light);
  color: #fff;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
}

.filter-tag .remove-tag {
  background: none;
  border: none;
  color: rgba(255,255,255,0.8);
  cursor: pointer;
  padding: 0;
  font-size: 1rem;
  line-height: 1;
}

.filter-tag .remove-tag:hover {
  color: #fff;
}

.clear-all-btn {
  background: none;
  border: none;
  color: var(--treasury-navy-light);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  text-decoration: underline;
}

.clear-all-btn:hover {
  color: var(--treasury-navy);
}

/* Results area */
#filtered-results .results-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.reset-btn {
  background: none;
  border: none;
  color: var(--treasury-navy-light);
  font-size: 0.8125rem;
  font-weight: 600;
  cursor: pointer;
  text-decoration: underline;
}

.reset-btn:hover {
  color: var(--treasury-navy);
}

/* Responsive */
@media (max-width: 900px) {
  .filter-row {
    flex-direction: column;
    align-items: stretch;
    gap: 0.75rem;
  }

  .quick-filters {
    flex-wrap: wrap;
  }

  .date-range-group {
    width: 100%;
  }

  .date-picker {
    flex: 1;
    width: auto;
  }

  .keyword-search-group {
    max-width: none;
    width: 100%;
  }

  .advanced-search-link {
    margin-left: 0;
    justify-content: center;
    padding: 0.5rem;
    background: var(--gray-200);
  }
}

@media (max-width: 480px) {
  .quick-filters {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.375rem;
    width: 100%;
  }

  .quick-filter-btn {
    text-align: center;
  }
}
</style>

{{/* Load external script for CSP compliance */}}
{{ $filtersJS := resources.Get "js/news-inline-filters.js" | minify | fingerprint }}
<script src="{{ $filtersJS.RelPermalink }}"></script>
