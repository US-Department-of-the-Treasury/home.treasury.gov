{{/* Article Sidebar - Search, Subscribe, and Metadata */}}
<aside class="article-sidebar" id="article-sidebar">
  {{/* Actions */}}
  <div class="sidebar-actions">
    <a href="/news/search/" class="btn-sidebar-action btn-advanced-search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      Advanced Search
    </a>
    <a href="https://public.govdelivery.com/accounts/USTREAS/subscriber/new" class="btn-sidebar-action btn-subscribe" target="_blank" rel="noopener">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
        <polyline points="22,6 12,13 2,6"></polyline>
      </svg>
      Subscribe to Updates
    </a>
  </div>

  {{/* Article Metadata */}}
  <div class="article-metadata" id="article-metadata">
    <h3 class="metadata-title">About This Article</h3>
    <div class="metadata-loading" id="metadata-loading">Loading...</div>
    <div class="metadata-content" id="metadata-content" style="display: none;"></div>
  </div>
</aside>

<style>
/* Article Sidebar */
.article-sidebar {
  padding-left: 0;
}

/* Action Buttons */
.sidebar-actions {
  display: flex;
  flex-direction: column;
  gap: 0.625rem;
  margin-bottom: 1.5rem;
}

.btn-sidebar-action {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  font-weight: 600;
  text-decoration: none;
  text-align: center;
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-advanced-search {
  background: #fff;
  border: 2px solid var(--treasury-navy-light);
  color: var(--treasury-navy-light);
}

.btn-advanced-search:hover {
  background: var(--treasury-navy-light);
  color: #fff;
}

.btn-subscribe {
  background: var(--treasury-green);
  color: #fff;
}

.btn-subscribe:hover {
  background: #256d35;
  color: #fff;
}

/* Metadata Section */
.article-metadata {
  background: var(--gray-100);
  border: 1px solid var(--gray-200);
  padding: 1rem;
}

.metadata-title {
  font-family: var(--font-body);
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--gray-600);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin: 0 0 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--gray-200);
}

.metadata-loading {
  font-size: 0.875rem;
  color: var(--gray-500);
  font-style: italic;
}

.metadata-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.metadata-group {
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.metadata-label {
  font-size: 0.6875rem;
  font-weight: 600;
  color: var(--gray-600);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.metadata-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.375rem;
}

.metadata-tag {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.15s ease;
}

.metadata-tag--admin {
  background: #e8f0f8;
  color: #0B122C;
  border: 1px solid #c5d4e8;
}

.metadata-tag--admin:hover {
  background: #0B122C;
  color: #fff;
}

.metadata-tag--secretary {
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffc107;
}

.metadata-tag--secretary:hover {
  background: #856404;
  color: #fff;
}

.metadata-tag--topic {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.metadata-tag--topic:hover {
  background: #155724;
  color: #fff;
}

.metadata-tag--office {
  background: #e2e3e5;
  color: #383d41;
  border: 1px solid #d6d8db;
}

.metadata-tag--office:hover {
  background: #383d41;
  color: #fff;
}

.metadata-tag--section {
  background: var(--treasury-navy-light);
  color: #fff;
}

.metadata-tag--section:hover {
  background: var(--treasury-navy);
}

.metadata-tag--country {
  background: #f8f9fa;
  color: #495057;
  border: 1px solid #dee2e6;
}

.metadata-tag--country:hover {
  background: #495057;
  color: #fff;
}

.country-flag {
  font-size: 0.875rem;
}

.metadata-value {
  font-size: 0.875rem;
  color: var(--gray-700);
}

/* Responsive */
@media (max-width: 1024px) {
  .article-sidebar {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--gray-200);
  }

  .sidebar-actions {
    flex-direction: row;
    flex-wrap: wrap;
  }

  .btn-sidebar-action {
    flex: 1;
    min-width: 150px;
  }
}
</style>

{{/* Load external script for CSP compliance */}}
{{ $sidebarJS := resources.Get "js/article-sidebar.js" | minify | fingerprint }}
<script src="{{ $sidebarJS.RelPermalink }}"></script>
